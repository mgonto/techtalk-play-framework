<?xml version="1.0"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Enable @Annotation-drive bean configuration -->
    <context:annotation-config />
    
    
    <import resource="servlets-web-tagg-spring.xml"/>
    <import resource="classpath:com/qualcomm/tagg/impl/config/services-impl-tagg-spring.xml"/>
    
    <!-- Web -->
    <!-- Web Versioning -->
    <import resource="classpath:ar/com/zauber/commons/web/version/version-provider-spring.xml"/>
    <import resource="classpath:ar/com/zauber/commons/spring/web/utils/resource-version-provider-spring.xml"/>
    
    
    
        <bean id="log4jLocation" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="log4jconfig" />
        <property name="expectedType" value="java.lang.String" />
        <property name="resourceRef" value="true" />
        <property name="defaultObject" value="classpath:log4j.properties" />
    </bean>

    <bean id="log4jInitialization"
        class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
        <property name="targetClass" value="org.springframework.util.Log4jConfigurer" />
        <property name="targetMethod" value="initLogging" />
        <property name="arguments">
            <list>
                <ref bean="log4jLocation" />
            </list>
        </property>
    </bean>
    
    
</beans>
<?xml version="1.0"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <!-- BEGIN: Spring MVC Main Classes Configuration -->
    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>


    <!-- Tiles View Resolver -->
    <bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
        <property name="redirectContextRelative" value="false" />
        <property name="viewClass"
            value="org.springframework.web.servlet.view.tiles2.TilesView" />
        <property name="order" value="10" />
    </bean>
    <bean id="tilesConfigurer"
        class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles-config.xml</value>
            </list>
        </property>
    </bean>


    <!-- Para internacionalizaciÃ³n -->
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basenames">
            <value>${tagg.web.i18properties.path}</value>
        </property>
        <property name="defaultEncoding" value="UTF-8" />
        <property name="useCodeAsDefaultMessage" value="false" />
        <property name="cacheSeconds" value="60" />
    </bean>
    <!-- END: Locale Resolution -->


    <!-- END: Spring MVC Main Classes Configuration -->

    <!-- BEGIN: Web Utils -->
    <bean id="assetsUriFactory"
        class="ar.com.zauber.commons.web.uri.factory.ConfigurableUriFactoryFactoryBean">
        <constructor-arg>
            <bean class="ar.com.zauber.commons.web.uri.factory.RelativePathUriFactory">
                <constructor-arg>
                    <bean class="ar.com.zauber.commons.web.uri.factory.IdentityUriFactory" />
                </constructor-arg>
            </bean>
        </constructor-arg>
        <property name="version" value="${tagg.web.version}" />
        <!--
            <property name="prefixKey" value="${sunsilk.web.assetsPrefix}" />
        -->
    </bean>


    <bean name="linksUriFactory"
        class="ar.com.zauber.commons.web.uri.factory.RelativePathUriFactory">
        <constructor-arg>
            <ref bean="mapUriFactory" />
        </constructor-arg>
    </bean>

    <bean id="fullSiteUrl" class="java.lang.String">
        <constructor-arg value="${full.site.url}"></constructor-arg>
    </bean>
    <bean id="buyOneUrl" class="java.lang.String">
        <constructor-arg value="${buy.one.url}"></constructor-arg>
    </bean>
    <bean id="supportUrl" class="java.lang.String">
        <constructor-arg value="${support.url}"></constructor-arg>
    </bean>
    <bean id="logoutUrl" class="java.lang.String">
        <constructor-arg value="${logout.url}"></constructor-arg>
    </bean>
    
    <bean id="learnMoreOk" class="java.lang.String">
        <constructor-arg value="${learnmore.ok.link}"></constructor-arg>
    </bean>
    
    <bean id="supportOk" class="java.lang.String">
        <constructor-arg value="${support.ok.link}"></constructor-arg>
    </bean>

    <bean id="mapUriFactory"
        class="ar.com.zauber.commons.web.uri.factory.ConfigurableUriFactoryFactoryBean">
        <constructor-arg>
            <bean class="ar.com.zauber.commons.web.uri.factory.ExpressionMapUriFactory">
                <constructor-arg index="0">
                    <bean
                        class="org.springframework.expression.spel.standard.SpelExpressionParser" />
                </constructor-arg>
                <constructor-arg index="1">
                    <map key-type="java.lang.String">
                        <entry key="base" value="/" />
                        <entry key="asset-image" value="/dashboard/image/asset/{#root[0].assetProfileId}" />
                        <entry key="default-pet-image" value="/static/images/pet-default.png" />
                        <entry key="dashboard" value="/dashboard/list" />
                        <entry key="settings" value="/settings" />
                        <entry key="settings-opted-in" value="/settings-opted-in" />
                        <entry key="map-image" value="/view/image/asset/{#root[0]}" />
                        <entry key="map-view" value="/view/decide/asset/{#root[0]}" />
                        <entry key="map-static-view" value="/view/asset/{#root[0]}" />
                        <entry key="pending-update" value="/asset/{#root[0].id}/update" />
                        
                        
                        <!-- Activity Monitoring -->
                        <entry key="am-view-pet" value="/activity-monitoring/asset/{#root[0]}" />
                        <entry key="am-view-all" value="/activity-monitoring/{#root[0]}/asset/{#root[1].id}/{#root[2]}/" />
                        <entry key="am-view-interval" value="/activity-monitoring/{#root[0]}/asset/{#root[1].id}" />
                        <entry key="am-graph" value="/activity-monitoring/{#root[0]}/asset/{#root[1].id}/{#root[2]}/graph" />
                        
                        <!-- Locate -->
                        <entry key="locate" value="/locate/asset/{#root[0]}"/>
                        <entry key="locate-with-device" value="/locate/device/{#root[0]}"/>
                        <entry key="locate-view" value="/locate/asset/{#root[0]}?trackingId={#root[1]}"/>
                        <entry key="locate-view-time" value="/locate/asset/{#root[0]}?trackingId={#root[1]}&amp;timeStamp={#root[2]}"/>
                        <entry key="locate-started" value="/locate/asset/{#root[0]}?trackingId={#root[1]}&amp;started=true"/>
                        <entry key="locate-started-time" value="/locate/asset/{#root[0]}?trackingId={#root[1]}&amp;started=true&amp;timeStamp={#root[2]}"/>
                        
                        <!-- Track -->
                        <entry key="track-start" value="/track/asset/{#root[0]}?fromUriKey=dashboard"/>
                        <entry key="track-with-device" value="/track/device/{#root[0]}"/>
                        <entry key="track-start-with-from" value="/track/asset/{#root[0]}?fromUriKey={#root[1].uriKey}&amp;fromParameters={#root[1].parameters}"/>
                        <entry key="start-track" value="/track/start/asset/{#root[0]}"/>
                        <entry key="track-started" value="/track/view/asset/{#root[0]}?trackingId={#root[1]}&amp;started=true"/>
                        <entry key="track-already-started" value="/track/confirm-started/asset/{#root[0]}?trackingId={#root[1]}"/>
                        <entry key="track-view" value="/track/view/asset/{#root[0]}?trackingId={#root[1]}"/>
                        <entry key="track-view-updated" value="/track/view/asset/{#root[0]}?trackingId={#root[1].trackingId}&amp;positionTimestamp={#root[1].positionTimestamp}"/>
                        <entry key="track-view-updated-redirect" value="/track/view/asset/{#root[0]}?trackingId={#root[1]}&amp;positionTimestamp={#root[2]}"/>
                        <entry key="stop-track-with-device" value="/track/confirm-stop/device/{#root[0]}"/>
                        <entry key="stop-track-device" value="/track/stop/device/{#root[0]}"/>
                        <entry key="stop-track" value="/track/stop/asset/{#root[0]}?trackingId={#root[1]}"/>
                        <entry key="track-stop" value="/track/confirm-stop/asset/{#root[0]}?trackingId={#root[1]}&amp;fromUriKey=dashboard"/>
                        <entry key="track-stop-with-from" value="/track/confirm-stop/asset/{#root[0]}?trackingId={#root[1]}&amp;fromUriKey={#root[2].uriKey}&amp;fromParameters={#root[2].parameters}"/>
                        <entry key="redirect-view-with-parameters" value="/redirect/view/{#root[0]}?parameters={#root[1]}"/>
                        <entry key="redirect-view" value="/redirect/view/{#root[0]}"/>
                    </map>
                </constructor-arg>
            </bean>
        </constructor-arg>
    </bean>

    <bean id="absoluteUriFactory"
        class="ar.com.zauber.commons.web.uri.factory.ConfigurableUriFactoryFactoryBean">
        <constructor-arg>
            <bean class="ar.com.zauber.commons.web.uri.factory.ExpressionMapUriFactory">
                <constructor-arg index="0">
                    <bean
                        class="org.springframework.expression.spel.standard.SpelExpressionParser" />
                </constructor-arg>
                <constructor-arg index="1">
                    <map key-type="java.lang.String">
                        <entry key="full-site" value-ref="fullSiteUrl" />
                        <entry key="buy-one" value-ref="buyOneUrl" />
                        <entry key="support" value-ref="supportUrl" />
                        <entry key="supportok" value-ref="supportOk" />
                        <entry key="learnmoreok" value-ref="learnMoreOk" />
                        <entry key="logout" value-ref="logoutUrl" />
                    </map>
                </constructor-arg>
            </bean>
        </constructor-arg>
        <!-- <property name="prefixKey" value="${sunsilk.web.baseUri}" /> -->
    </bean>

    <bean id="requestProvider"
        class="ar.com.zauber.commons.web.uri.factory.ContextListenerRequestProvider" />


    <bean id="requestAssetsRepository" scope="request"
        class="ar.com.zauber.commons.web.uri.model.SimpleAssetsRepository" />
    <!-- END: Web Utils -->
    
    <!-- TEST ONLY --> 
    <bean id="userAwareFilter" class="com.qualcomm.tagg.web.filters.MockUserAwareFilter">
        <constructor-arg index="0" value="${filter.mock.userid}"></constructor-arg>
        <constructor-arg index="1" value="${filter.mock.enabled}"></constructor-arg>
        <constructor-arg ref="userIdParam"></constructor-arg>
    </bean>

    <bean name="userIdParam" class="java.lang.String">
        <constructor-arg value="${login.filter.user.id}"></constructor-arg>
    </bean>

    <bean name="exceptionResolver"
        class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
        <property name="exceptionMappings">
            <props>
                <prop key="com.qualcomm.tagg.exceptions.ViewWrapperException">error/error</prop>
                <prop key="com.qualcomm.tagg.exceptions.WebServiceUnavailableException">web-service-error</prop>
                <prop key="java.lang.Exception">unknown-error</prop>
            </props>
        </property>
        <property name="warnLogCategory" value="exceptionHandlerLog" />
    </bean>
</beans>

<?xml version="1.0"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <bean id="propertyConfigurer"
        class="ar.com.zauber.commons.spring.configurers.JndiPropertyPlaceholderConfigurer">
        <constructor-arg index="0">
            <list>
                <value>fileTaggWebAppProperties</value>
            </list>
        </constructor-arg>
        <property name="locations">
            <list>
                <value>classpath:com/qualcomm/tagg/web/config/properties/application.properties</value>
            </list>
        </property>
    </bean>

    <!-- For api-servlet injection -->
    
</beans>
<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
           http://www.springframework.org/schema/mvc 
           http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
           http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
           http://www.springframework.org/schema/util 
           http://www.springframework.org/schema/util/spring-util.xsd">

    <mvc:annotation-driven />
    
    <!-- register "global" interceptor beans to apply to all registered HandlerMappings -->
    <mvc:interceptors>
        <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
           <property name="paramName" value="siteLang" />
        </bean>
    </mvc:interceptors>
    
    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <mvc:resources location="/static/" mapping="/static/**"/>
    
    <!-- BEGIN: Controllers -->
    
    <bean abstract="true" id="abstractController" class="com.qualcomm.tagg.web.controllers.AbstractController">
        <constructor-arg index="0" ref="userIdParam"/>
        <constructor-arg index="1" ref="messageSource"/>
        <constructor-arg index="2" ref="linksUriFactory"/>
    </bean>
    
    <bean id="viewMapController" class="com.qualcomm.tagg.web.controllers.ViewMapController" parent="abstractController">
        <constructor-arg index="3" ref="assetsService"/>
        <constructor-arg index="4" ref="locationService"/>
    </bean>
    
    <bean id="activityMonitoringController" class="com.qualcomm.tagg.web.controllers.ActivityMonitoringController" parent="abstractController">
        <constructor-arg index="3" ref="activityMonitoringService"/>
        <constructor-arg index="4" ref="assetsService"/>
        <constructor-arg index="5" ref="walkEventHandler"/>
    </bean>
    
    

    <bean id="locationController" class="com.qualcomm.tagg.web.controllers.LocationController" parent="abstractController">
        <constructor-arg index="3" ref="assetsService"/>
        <constructor-arg index="4" ref="locationService"/>
    </bean>
    
    <bean id="trackingController" class="com.qualcomm.tagg.web.controllers.TrackingController" parent="abstractController">
        <constructor-arg index="3" ref="assetsService"/>
        <constructor-arg index="4" ref="locationService"/>
    </bean>

    <bean id="assetsController" class="com.qualcomm.tagg.web.controllers.AssetsController" parent="abstractController">
        <constructor-arg index="3" ref="assetsService"/>
    </bean>

    <bean id="settingsController" class="com.qualcomm.tagg.web.controllers.SettingsController" parent="abstractController">
        <constructor-arg index="3" ref="settingsService"/>
    </bean>
    
    <bean id="redirectController" class="com.qualcomm.tagg.web.controllers.RedirectController" parent="abstractController"/>
    
    <mvc:view-controller path="/learn-more" view-name="static/learnmore"/>
    
    <mvc:view-controller path="/support" view-name="static/support"/>
    
    <!-- END: Controllers -->
    
    
    <!-- MOCK Controllers  -->
    <!-- End: MOCK Controllers-->

</beans>

<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee  http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
  version="2.4">
   
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:com/qualcomm/tagg/web/config/context-web-tagg-spring.xml
            classpath:com/qualcomm/tagg/web/config/properties-web-tagg-spring.xml
        </param-value>
    </context-param>
    
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    
    <filter>
        <filter-name>utf8Encoding</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <description>Forza el enconding de los responses (AMQ no los devuelve como UTF)</description>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>utf8Encoding</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    
     <!-- -->
     <filter>
        <filter-name>userAwareFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter> 
    <filter-mapping>
        <filter-name>userAwareFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>api</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>api</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <error-page>
        <error-code>500</error-code>
        <location>/oops</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/oops</location>
    </error-page>
</web-app>

<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>

    <definition name="defaultTemplate" template="/WEB-INF/pages/templates/default.jsp">
                <put-attribute name="title" value="Tagg" />
                <put-attribute name="pagetitle" value="Tagg" cascade="true"/>
                <put-attribute name="titlePart" value="/WEB-INF/pages/jsp/content/title.jsp" />
                <put-attribute name="header" value="" />
                <put-attribute name="refreshPart" value="" />
                <put-attribute name="content" value="" />
                <put-attribute name="mainContentClass" value="" />
    </definition>

    <definition name="map/view" extends="defaultTemplate">
                <put-attribute name="pagetitle" value="Tagg Map" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/viewMap.jsp" />
                <put-attribute name="mainContentClass" value="screen map-screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/view-map-refresh.jsp" />
                
    </definition>
    
    <definition name="static/learnmore" extends="defaultTemplate">
                <put-attribute name="pagetitle" value="Learn More" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/learnmore.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
                
    </definition>
    
    <definition name="static/support" extends="defaultTemplate">
                <put-attribute name="pagetitle" value="Support" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/support.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
                
    </definition>

    <definition name="map/locate" extends="defaultTemplate">
                <put-attribute name="pagetitle" value="Tagg Map" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/locateMap.jsp" />
                <put-attribute name="mainContentClass" value="screen map-screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/locate-refresh.jsp" />
    </definition>
    
    <definition name="error/error" extends="defaultTemplate">
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/error.jsp" />
                <put-attribute name="mainContentClass" value="screen error-screen" />
                <put-attribute name="titlePart" value="/WEB-INF/pages/jsp/content/errorTitle.jsp" />
    </definition>
    
    <definition name="dashboard/list" extends="defaultTemplate">
                <put-attribute name="title" value="Tagg Dashboard" />
                <put-attribute name="pagetitle" value="Pets" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/dashboard.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/dashboard-refresh.jsp" />
    </definition>
    
    <definition name="asset/updates" extends="defaultTemplate">
                <put-attribute name="title" value="Tagg Update" />
                <put-attribute name="pagetitle" value="Pets" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/update.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/update-refresh.jsp" />
    </definition>
    
    <definition name="am/view" extends="defaultTemplate">
                <put-attribute name="title" value="Tagg Activity" />
                <put-attribute name="pagetitle" value="Tagg Activity" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/activity-monitoring.jsp" />
                <put-attribute name="mainContentClass" value="screen map-screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/am-refresh.jsp" />
    </definition>
    
    
    <definition name="notifications/settings" extends="defaultTemplate">
                <put-attribute name="title" value="Tagg Settings" />
                <put-attribute name="pagetitle" value="Settings" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/settings.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
    </definition>
    
    <definition name="notifications/confirmSms" extends="defaultTemplate">
                <put-attribute name="title" value="Tagg Opt-In For Text Messages" />
                <put-attribute name="pagetitle" value="Opt-In For Text Messages" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/smsoptin.jsp" />
                <put-attribute name="mainContentClass" value="screen" />
    </definition>
    
    <definition name="unknown-error" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="screen error-screen" />
                <put-attribute name="titlePart" value="/WEB-INF/pages/jsp/content/unknown-error.jsp" />
    </definition>
    
    <definition name="web-service-error" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="screen error-screen" />
                <put-attribute name="titlePart" value="/WEB-INF/pages/jsp/content/web-service-error.jsp" />
    </definition>

    <definition name="confirm/start-track" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="content-main" />
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/start-track.jsp" />
                <put-attribute name="pagetitle" value="Start Tracking?" cascade="true"/>
    </definition>

    <definition name="confirm/stop-track" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="content-main" />
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/stop-track.jsp" />
                <put-attribute name="pagetitle" value="Stop Tracking?" cascade="true"/>
    </definition>
    
    <definition name="confirm/stop-track-with-device" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="content-main" />
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/stop-track-with-device.jsp" />
                <put-attribute name="pagetitle" value="Stop Tracking?" cascade="true"/>
    </definition>
    
    

    <definition name="track/view" extends="defaultTemplate">
                <put-attribute name="pagetitle" value="Tagg Map" cascade="true"/>
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/trackMap.jsp" />
                <put-attribute name="mainContentClass" value="screen map-screen" />
                <put-attribute name="refreshPart" value="/WEB-INF/pages/jsp/content/track-refresh.jsp" />
    </definition>

    <definition name="confirm/track-started" extends="defaultTemplate">
                <put-attribute name="mainContentClass" value="content-main" />
                <put-attribute name="content" value="/WEB-INF/pages/jsp/content/track-started.jsp" />
                <put-attribute name="titlePart" value="/WEB-INF/pages/jsp/content/track-started-title.jsp" />
    </definition>
</tiles-definitions>
